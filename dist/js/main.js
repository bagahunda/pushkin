"use strict";document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("body");t.classList.remove("preload");var e=document.querySelector(".main-slider");!e||(f=new Splide(e,{speed:800,perPage:1,arrows:!1,pagination:!0}))&&f.mount();var n,o=document.querySelector(".idea-slider");o&&((n=new Splide(o,{type:"loop",perPage:4,perMove:1,gap:30,speed:800,updateOnMove:!0,flickMaxPages:1,swipeDistanceThreshold:10,pagination:!1,waitForTransition:!1,classes:{arrows:"idea-slider__pagination",arrow:"idea-slider__arrow",prev:"idea-slider__prev",next:"idea-slider__next"}}))&&n.mount(),(y=document.querySelectorAll(".ideas .idea-card__img"))&&y.forEach(function(t){t.addEventListener("click",function(){var e=t.parentNode.dataset.slide;n.go(e-1)})}));var r=document.querySelector(".visit-slider");!r||(k=new Splide(r,{type:"loop",perPage:4,perMove:1,gap:30,speed:800,updateOnMove:!0,flickMaxPages:1,swipeDistanceThreshold:10,pagination:!1,waitForTransition:!1,classes:{arrows:"visit-slider-pagination",arrow:"visit-slider__arrow",prev:"visit-slider-prev",next:"visit-slider-next"}}))&&k.mount();var i=document.querySelectorAll(".subcat-slider");i&&i.forEach(function(e,t){window["innerSlider".concat(t)]=new Splide(e,{type:"loop",perPage:4,perMove:1,gap:30,speed:800,flickMaxPages:1,pagination:!1,classes:{arrows:"subcat-slider__arrows",arrow:"subcat-slider__arrow",prev:"subcat-slider__prev",next:"subcat-slider__next"},breakpoints:{1200:{perPage:3},992:{perPage:2},576:{perPage:1}}}),window["innerSlider".concat(t)]&&window["innerSlider".concat(t)].mount()});var c=document.querySelector(".blogpost-slider");c&&new Splide(c,{type:"loop",perPage:3,perMove:1,gap:30,speed:800,flickMaxPages:1,pagination:!1,classes:{arrows:"subcat-slider__arrows",arrow:"subcat-slider__arrow",prev:"subcat-slider__prev",next:"subcat-slider__next"},breakpoints:{992:{perPage:2},768:{perPage:1}}}).mount();var s,a=document.querySelector(".product-slider__main");a&&(P=new Splide(a,{pagination:!1,classes:{arrows:"product-slider__arrows",arrow:"product-slider__arrow",prev:"product-slider__prev",next:"product-slider__next"}}),(j=new Splide(".product-slider-thumb",{fixedWidth:120,gap:10,pagination:!1,arrows:!1,isNavigation:!0,classes:{arrows:"product-slider-thumb__arrows",arrow:"product-slider-thumb__arrow",prev:"product-slider-thumb__prev",next:"product-slider-thumb__next"},breakpoints:{550:{fixedWidth:65}}})).mount(),P.sync(j).mount()),document.querySelector(".about__review-slider")&&((s=new Splide(".about__review-slider",{pagination:!1,arrows:!1,perPage:1,type:"loop"})).mount(),B=document.querySelector(".about__reviews-slider-button--next"),D=document.querySelector(".about__reviews-slider-button--prev"),B.addEventListener("click",function(){s.go("+")}),D.addEventListener("click",function(){s.go("-")}));function l(n,r){if(Array.isArray(n))return!!n.length&&n.map(function(e){return new l(e,r)});({init:function(){this.options=Object.assign({elementClass:"star",activeColor:"#5100D3",baseColor:"#BDBDBD",readOnly:!0},r);var e="string"==typeof n;if(this.container=e?document.querySelector(n):n,this.rating=this.container.dataset.rating,Number.isInteger(this.rating)||(this.percent="".concat(Math.ceil(100*(this.rating-Math.floor(this.rating))),"%")),!this.rating)throw new Error("You must provide data-rating on stars container");var o,t=this.options.elementClass;this.elements=Array.from(this.container.childNodes).filter(function(e){return e.classList&&e.classList.contains(t)}),this.elements.forEach(function(e){var t="_".concat(Math.random().toString(36).substr(2,9)),n=e.querySelector("linearGradient"),e=e.querySelector("path");n.id="gradient".concat(t),e.setAttribute("fill","url(#gradient".concat(t,")"))}),this.target=this.rating<5?this.elements[Math.floor(this.rating)]:this.elements[4],this.elements.length=Math.floor(this.rating),this.setRating(),this.options.readOnly||(o=Array.from(this.container.childNodes).filter(function(e){return e.classList&&e.classList.contains(t)})).forEach(function(e,n){e.addEventListener("click",function(){for(var e=0;e<=n;e+=1)o[e].classList.add("star--filled");for(var t=n+1;t<o.length;t+=1)o[t].classList.remove("star--filled")})})},setRating:function(){this.elements.forEach(function(e){e.classList.add("star--filled")});var e=this.target.querySelector(".color1-start"),t=this.target.querySelector(".color1-end"),n=this.target.querySelector(".color2-start");e.setAttribute("stop-color",this.options.activeColor),t.setAttribute("stop-color",this.options.activeColor),this.percent&&(t.setAttribute("offset",this.percent),n.setAttribute("offset",this.percent))}}).init()}var d=document.querySelectorAll(".js-show-stars");d&&d.forEach(function(e,t){window["stars".concat(t)]=new l(e)});var u=document.querySelectorAll(".js-set-stars");u&&u.forEach(function(e,t){window["starsRate".concat(t)]=new l(e,{readOnly:!1})});function p(t,n){if(Array.isArray(t))return!!t.length&&t.map(function(e){return new numberInput(e,n)});({init:function(){this.options=Object.assign({max:100,min:1,step:1},n);var e="string"==typeof t;this.container=e?document.querySelector(t):t;e=Array.from(this.container.querySelectorAll(".number-input__button"));this.targetInput=this.container.querySelector("input"),this.decButton=e[0],this.incButton=e[1],this.decButton.addEventListener("click",this.decrement.bind(this)),this.incButton.addEventListener("click",this.increment.bind(this))},decrement:function(){var e=+this.targetInput.value;if(!(e>this.options.min))return!1;this.targetInput.value=e-1},increment:function(){var e=+this.targetInput.value;if(!(e<this.options.max))return!1;this.targetInput.value=1+e}}).init()}var m=document.querySelectorAll(".number-input");m&&m.forEach(function(e,t){window["nubmerInput".concat(t)]=new p(e)});var e=document.querySelectorAll(".accordeon"),f=document.querySelector(".product__accordeon .accordeon");0<e.length&&!f&&e.forEach(function(e,t){window["accordeon".concat(t)]=new Accordion(e,{elementClass:"accordeon__item",triggerClass:"accordeon__trigger",panelClass:"accordeon__panel",activeClass:"accordeon__item--active",showMultiple:!0}),window["accordeon".concat(t)].open(1)}),f&&new Accordion(f,{elementClass:"accordeon__item",triggerClass:"accordeon__trigger",panelClass:"accordeon__panel",activeClass:"accordeon__item--active",showMultiple:!0}).openAll();function v(e,t){var n={},o=e,r=Array.from(o.querySelectorAll("option")).map(function(e){return e.textContent});if(n.optionsValues=r,r=o.querySelector("select").dataset.placeholder||"Выберите",n.placeholder=r,o.innerHTML='\n          <div class="select__value" data-type="value">'.concat(n.placeholder,'</div>\n          <div class="select__dropdown">\n            <div class="select__dropdown-items" role="listbox">\n               ').concat(n.optionsValues.map(function(e){return'\n                  <div class="select__dropdown-item" data-type="item" role="option" tabindex="0">\n                     '.concat(e,"\n                  </div>\n                  ")}).join(""),"\n            </div>\n          </div>\n          "),Array.isArray(e))return!!e.length&&e.map(function(e){return new v(e,t)});var i=o.querySelector(".select__dropdown"),c=o.querySelector(".select__dropdown-items"),s=o.querySelector('[data-type="value"]');function a(e){var t=e.target.dataset.type;"value"===t?d():"item"===t?u(e.target):m()}function l(e){e.preventDefault(),e.stopPropagation(),38===e.keyCode&&e.target.previousElementSibling?e.target.previousElementSibling.focus():40===e.keyCode&&e.target.nextElementSibling?e.target.nextElementSibling.focus():27===e.keyCode?m():13!==e.keyCode&&32!==e.keyCode||u(e.target)}function d(){o.classList.contains("select--open")?m():(p(),c.children[0].focus())}function u(e){s.textContent=e.textContent,t.onSelect&&t.onSelect(e.textContent),m()}function p(){i.style.display="block",setTimeout(function(){o.classList.add("select--open")},0)}function m(){o.classList.remove("select--open"),setTimeout(function(){i.style.display="none"},300),o.focus()}return o.addEventListener("click",a),o.addEventListener("keydown",function(e){27===e.keyCode?(e.preventDefault(),m()):13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),d())}),Array.from(c.children).forEach(function(e){e.addEventListener("keydown",l)}),{open:p,close:m,select:u,destroy:function(){o.removeEventListener("click",a)}}}var o=document.querySelector("#countrySelect"),y=document.querySelector("#citySelect"),r=document.querySelector("#cabinetCountrySelect");function g(e){e=e.target;e.parentNode.classList.add("active"),e.setAttribute("placeholder",e.getAttribute("data-placeholder"))}function h(e){e=e.target;e.value||e.parentNode.classList.remove("active"),e.removeAttribute("placeholder")}o&&v(o,{onSelect:function(e){console.log("country selected ->",e.trim())}}),y&&v(y,{onSelect:function(e){console.log("city seected ->",e.trim())}}),r&&v(r,{onSelect:function(e){console.log("city seected ->",e.trim())}}),{init:function(){var e=document.querySelectorAll(".float-input, .float-textarea");e.length&&e.forEach(function(e){var t;(e.querySelector("input")&&e.querySelector("input").value||e.querySelector("textarea")&&e.querySelector("textarea").value)&&e.classList.add("active"),e=(t=e).querySelector("input"),t=t.querySelector("textarea"),e&&(e.addEventListener("focus",g),e.addEventListener("blur",h)),t&&(t.addEventListener("focus",g),t.addEventListener("blur",h))})}}.init();function _(n){var o;return function(){var e=this,t=arguments;o&&window.cancelAnimationFrame(o),o=window.requestAnimationFrame(function(){n.apply(e,t)})}}function w(){var e=E.offsetHeight;t.style.paddingTop="".concat(e,"px"),E.classList.contains("top--pinned")||(E.style.top="-".concat(e,"px"))}function S(){var o=E.offsetHeight,r=0;document.addEventListener("scroll",function(){var e,t,n=window.scrollY||window.pageYOffset;I&&(e=(t=document.querySelector(".subscribe")).getBoundingClientRect().top-document.body.getBoundingClientRect().top,t=t.getBoundingClientRect().top-O,I<n&&n+O<e?(T.style.width="".concat(T.clientWidth,"px"),T.style.top="0",T.style.position="fixed"):t<=0?T.style.top="".concat(t,"px"):T.style.position="static"),o<=n?(n<r?(E.classList.add("top--pinned"),E.style.top=0,document.querySelectorAll(".nav.nav--desktop .nav__link--submenu .submenu-wrapper").forEach(function(e){e.style.display=""})):(E.classList.remove("top--pinned"),E.style.top="-".concat(o,"px"),992<window.innerWidth&&document.querySelectorAll(".nav.nav--desktop .nav__link--submenu .submenu-wrapper").forEach(function(e){e.style.display="none"})),r=n):(E.classList.add("top--pinned"),E.style.top=0)})}var b,q,L,E=document.querySelector(".top"),k=document.querySelector(".js-menu"),i=document.querySelector(".js-close-menu"),x=document.querySelector(".nav"),c=document.querySelectorAll(".nav__link--submenu"),A=document.querySelector(".nav"),a=document.querySelector(".js-search"),C=document.querySelector(".header__search"),M=document.querySelector(".filters__items"),P=document.querySelectorAll(".filters__item"),j=document.querySelector(".js-filters"),B=document.querySelector(".js-filters-close"),D=document.querySelectorAll(".share"),d=document.querySelector(".product__options"),u=document.querySelectorAll(".js-cart-remove"),T=document.querySelector(".checkout__summary"),I=T?T.getBoundingClientRect().top-document.body.getBoundingClientRect().top:null,O=T?T.offsetHeight:null,m=document.querySelector(".checkout .switch"),e=(document.querySelectorAll(".js-moneyback"),document.querySelector(".js-moneyback-next"),document.querySelectorAll(".js-subscribe-remove")),f=document.querySelector(".js-change-address"),o=document.querySelector(".js-reset-password"),y=document.querySelector("#qaModal"),R=document.querySelector(".contacts"),r=function(){window.innerWidth<=992?A.classList.remove("nav--desktop"):A.classList.add("nav--desktop")},W=_(r);function N(){var e,t,n,o;R&&(e=R.querySelector(".contacts__map"),(t=+window.innerWidth)<992?e.style.width="100%":(n=(o=+R.querySelector(".container").clientWidth)/2,o=(t-o)/2,e.style.width="".concat(n+o,"px")))}k&&k.addEventListener("click",function(){x.classList.add("is-menu-visible"),t.classList.add("overflow")}),i.addEventListener("click",function(){x.classList.remove("is-menu-visible"),t.classList.remove("overflow")}),window.addEventListener("resize",function(){W(),_(N()),_(w()),_(S())}),c.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("nav__link--opened")})}),a.addEventListener("click",function(){C.classList.toggle("mobile-search-visible");var e=C.querySelector("input");!function(e,t,n){t=e.classList.contains(t)?"show":"hide";"show"==t&&(e.style.display=n,e.style.opacity=0,setTimeout(function(){e.style.opacity=1},0)),"hide"==t&&(e.style.display=n,e.style.opacity=0,setTimeout(function(){e.style.display="none"},450))}(C,"mobile-search-visible",flex),e.focus()}),j&&j.addEventListener("click",function(){M.classList.add("filters__items--mobile"),t.classList.add("overflow")}),B&&B.addEventListener("click",function(){M.classList.remove("filters__items--mobile"),t.classList.remove("overflow")}),P&&P.forEach(function(e){e.addEventListener("click",function(){window.innerWidth<992&&e.classList.toggle("filters__item--opened")})}),D&&D.forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("share--opened")})}),d&&d.querySelectorAll(".product__option-items").forEach(function(e){var t=e.querySelectorAll("label");e.style.width="".concat(50*t.length+10*(t.length-1),"px")}),u&&u.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest(".cart__item");t.classList.add("cart__item--removed"),setTimeout(function(){t.remove()},300)})}),m&&(m=m.querySelectorAll("input"),b=document.querySelector(".checkout__form"),m.forEach(function(e){e.addEventListener("change",function(e){var t,n=e.target.value;"Физлицо"===n&&(b.classList.remove("checkout__form--org"),b.classList.add("checkout__form--ordinal"),e=document.querySelector("#countrySelect"),t=document.querySelector("#citySelect"),e&&v(e,{onSelect:function(e){console.log("country selected ->",e.trim())}}),t&&v(t,{onSelect:function(e){console.log("city seected ->",e.trim())}})),"Юрлицо"===n&&(b.classList.remove("checkout__form--ordinal"),b.classList.add("checkout__form--org"),t=document.querySelector("#orgCountrySelect"),n=document.querySelector("#orgCitySelect"),t&&v(t,{onSelect:function(e){console.log("country selected ->",e.trim())}}),n&&v(n,{onSelect:function(e){console.log("city seected ->",e.trim())}}))})})),e&&e.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest(".cabinetSubscribe__item");t.classList.add("cabinetSubscribe__item--removed"),setTimeout(function(){t.remove()},300)})}),f&&f.addEventListener("click",function(e){var t="Сохранить изменения"===e.target.textContent,n=document.querySelector(".cabinet__addresses .form");t?(n.classList.remove("form--edit"),e.target.textContent="Изменить адрес"):(n.classList.add("form--edit"),e.target.textContent="Сохранить изменения")}),o&&o.addEventListener("click",function(e){var t="Сохранить пароль"===e.target.textContent,n=document.querySelector(".cabinet__form");t?(n.classList.remove("cabinet__form--password-edit"),e.target.textContent="Сбросить пароль"):(n.classList.add("cabinet__form--password-edit"),e.target.textContent="Сохранить пароль")}),y&&(q=new bootstrap.Modal(y),document.querySelector("#qa-form").addEventListener("submit",function(e){e.preventDefault(),q.show()})),R&&function(){var e={lat:55.74763125647648,lng:37.60503481134306};L=new google.maps.Map(document.getElementById("map"),{center:e,zoom:16,mapId:"2ce0e883e173118e",disableDefaultUI:!0});new google.maps.Point(19,25),new google.maps.Marker({position:e,map:L,icon:"./dist/images/pin.svg"})}(),r(),w(),S(),N()});